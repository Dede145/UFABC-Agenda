<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <!-- 
      This is an HTML comment
      You can write text in a comment and the content won't be visible in the page
    -->

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="https://glitch.com/favicon.ico" />

    <!--
      This is the page head - it contains info the browser uses
      Like the title, which appears on the browser tab but not inside the page
      Further down you'll see the content that displays in the page
    -->
    <title>Cadastre-se</title>

    <!-- The website stylesheet -->
    <!-- <link rel="stylesheet" href="/style.css" /> -->

    <!-- The website JavaScript file -->
    <!-- <script src="/script.js"></script> -->
  </head>
  <body>
    <h1>Cadastre-se</h1>
      Email:<input type="text" id="email"/>
      Senha:<input type="password" id="password"/>
      <button id="submit">Submit</button>
    
    <script type="module">
      
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js";
      
      import { getDatabase, ref, set, child, update, remove } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-database.js";

      const firebaseConfig = {

        apiKey: "AIzaSyDUvPAVsZYH3RIfTM9dd6vVqvLr4jo2JO4",

        authDomain: "ufabc-agenda.firebaseapp.com",

        databaseURL: "https://ufabc-agenda-default-rtdb.firebaseio.com",

        projectId: "ufabc-agenda",

        storageBucket: "ufabc-agenda.appspot.com",

        messagingSenderId: "113886022929",

        appId: "1:113886022929:web:9719790176c29b143110b0",

        measurementId: "G-ZYWJLMBXNN"

      };

      // Initialize Firebase

      const app = initializeApp(firebaseConfig);
      
      const db = getDatabase();
      
      var email = document.getElementById('email');
      
      var password = document.getElementById('password');
      
      var subButton = document.getElementById('submit');
      
      function sendData() {
        set(ref(db, "Users/"+email.split('@')[0]), {
          Email: email.value,
          Password: password.value
        })
        .then(()=>{
          alert("Data sent successfully!");
        })
        .catch((error)=>{
          alert("Data not sent. error:"error);
        });
      }
      
      subButton.addEventListener('click', sendData);
      
    </script>
    
  </body>
</html>
